## 寄存器（这里只列出了段寄存器）

### 8086的16位寄存器

- CS：code segment
- DS：data segment
- SS：stack segment
- ES：extra segment，用于一个临时段寄存器

### 80386的32位寄存器

- FS：临时段寄存器（类似ES）
- GS：临时段寄存器（类似ES）

## 模式

### 实模式

- 内存空间：1MB，2^20bytes，地址范围是00000~FFFFF，表示这个地址需要20-bit的数字，但是寄存器都是16bit的，所以需要两个：第一个叫selector，第二个offset（selector必须存储在段寄存器中）。地址表示方式是16*select+offset

实模式中段地址的缺点：

- 单个selector只能表达64KB的内存，如果一个程序有超过64KB的代码怎么办？
  - CS单个值不能用于整个程序的执行。
    - 程序需要被切成多个段，段必须小于64KB。
    - 当从一个段执行到另外一个段时，CS的值必须改变。
  - 同样的问题也发生在DS上，处理大量数据场景。搞起来比较坑爹。
- 内存中的每一个地址，没有一个确定的段地址，例如对于04808，可以表示为047C:0048，也可以表示为047D:0038，这对于比较段地址会变的比较复杂。

### 16位保护模式，80286

//todo

### 32位保护模式，80386

//todo

## 参考

- pcasm-book.pdf
