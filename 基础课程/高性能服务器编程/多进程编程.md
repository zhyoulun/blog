### 基础

进程间通信方式：

- 管道，信号量，消息队列，共享内存，unix domain socket

### 系统调用

- fork: 复制进程映像
  - 在内核进程表中创建一个新的进程表项
    - 常见的不变的信息：堆指针，栈指针，标志寄存器
    - 发生变化的信息：PPID，信号位图被清除（原进程设置的信号处理函数不再对新进程产生作用）
  - 数据复制时会采用写时复制（cow，copy on write）
    - 只有在父子某一进程对数据进行写操作时，复制才会发生（1. 缺页中断，2. 操作系统给子进程分配内存并复制父进程数据）
  - 创建子进程后，父进程中打开的文件描述符默认在子进程中也是打开的，且文件描述符的引用计数+1；此外父进程的用户根目录、当前工作目录等变量的引用计数也会+1
- exec: 替换进程映像
  - 用于在子进程中执行其它程序
  - exec函数不会关闭原程序打开的文件描述符，除非该文件描述符被设置了类似SOCK_CLOEXEC的属性