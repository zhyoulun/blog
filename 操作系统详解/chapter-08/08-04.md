# 5.4. 异常来源  

处理器从三个来源接收异常：  
- **处理器检测到的程序错误异常**。  
- **软件生成的异常**。  
- **机器检查异常**。  

#### 5.4.1. 程序错误异常  
当处理器在执行应用程序、操作系统或执行程序时检测到程序错误时，会生成一个或多个异常。IA-32 架构为每个处理器可检测的异常定义了一个向量号。这些异常进一步分类为故障（Faults）、陷阱（Traps）和中止（Aborts）（参见第 5.5 节“异常分类”）。  

#### 5.4.2. 软件生成的异常  
**INTO**、**INT 3** 和 **BOUND** 指令允许在软件中生成异常。这些指令允许在指令流的特定点检查特定的异常条件。例如，**INT 3** 指令会生成断点异常。  

**INT n** 指令可用于在软件中模拟特定异常，但有一个限制。如果 **INT n** 指令中的操作数 **n** 包含 IA-32 架构异常之一的向量，处理器将生成一个指向该向量的中断，从而调用与该向量关联的异常处理程序。然而，由于这实际上是一个中断，处理器不会将错误代码压入堆栈，即使硬件生成的该向量异常通常会生成错误代码。对于那些生成错误代码的异常，异常处理程序在处理异常时会尝试从堆栈中弹出错误代码。如果使用 **INT n** 指令模拟异常生成，处理程序将弹出并丢弃 **EIP**（代替缺失的错误代码），从而导致返回到错误的位置。  

#### 5.4.3. 机器检查异常  
P6 系列和 Pentium 处理器提供了内部和外部机器检查机制，用于检查内部芯片硬件和总线事务的操作。这些机制构成了扩展的（实现相关的）异常机制。当检测到机器检查错误时，处理器会发出机器检查异常（向量 18）并返回错误代码。  

有关机器检查机制的详细描述，请参见本章末尾的“中断 18——机器检查异常（#MC）”以及第 14 章“机器检查架构”。