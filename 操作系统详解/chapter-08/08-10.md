# INTERRUPT DESCRIPTOR TABLE (IDT)

![](/static/images/2502/p045.png)

中断描述符表（IDT）将每个异常或中断向量与用于处理相关异常或中断的过程或任务的门描述符关联起来。与 GDT 和 LDT 类似，IDT 是一个 8 字节描述符数组（在保护模式下）。与 GDT 不同的是，IDT 的第一个条目可以包含一个描述符。为了形成对 IDT 的索引，处理器将异常或中断向量乘以 8（门描述符的字节数）。由于只有 256 个中断或异常向量，因此 IDT 不需要包含超过 256 个描述符。它可以包含少于 256 个描述符，因为只需要为可能发生的中断和异常向量提供描述符。IDT 中所有空的描述符槽的描述符存在标志应设置为 0。

IDT 的基地址应按照 8 字节边界对齐，以最大限度地提高缓存行填充的性能。限制值以字节表示，并添加到基地址以获取最后一个有效字节的地址。限制值为 0 时，恰好有 1 个有效字节。由于 IDT 条目始终为 8 字节长，因此限制值应始终为 8 的整数倍减一（即 8N – 1）。

IDT 可以位于线性地址空间中的任何位置。如图 5-1 所示，处理器使用 IDTR 寄存器定位 IDT。该寄存器同时保存 IDT 的 32 位基地址和 16 位限制值。

LIDT（加载 IDT 寄存器）和 SIDT（存储 IDT 寄存器）指令分别加载和存储 IDTR 寄存器的内容。LIDT 指令将 IDTR 寄存器加载为内存操作数中保存的基地址和限制值。该指令只能在 CPL 为 0 时执行。它通常由操作系统的初始化代码在创建 IDT 时使用。操作系统也可以使用它从一个 IDT 切换到另一个 IDT。SIDT 指令将 IDTR 中存储的基地址和限制值复制到内存中。该指令可以在任何特权级别执行。

如果向量引用了超出 IDT 限制的描述符，则会生成一般保护异常（#GP）。