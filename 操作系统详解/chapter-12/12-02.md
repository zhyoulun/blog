# 操作模式列表

IA-32架构支持三种操作模式和一个准操作模式：

- **保护模式**：这是处理器的原生操作模式。在此模式下，所有指令和架构特性都可用，提供了最高的性能和能力。这是所有新应用程序和操作系统的推荐模式。
- **实地址模式**：这种操作模式提供了Intel 8086处理器的编程环境，并带有一些扩展功能（例如能够切换到保护模式或系统管理模式）。
- **系统管理模式（SMM）**：系统管理模式（SMM）是所有IA-32处理器的标准架构特性，从Intel386 SL处理器开始。此模式为操作系统或执行程序提供了一种透明的机制，用于实现电源管理和OEM差异化功能。SMM通过激活外部系统中断引脚（SMI#）进入，该引脚会生成系统管理中断（SMI）。在SMM中，处理器切换到单独的地址空间，同时保存当前运行程序或任务的上下文。然后可以透明地执行SMM特定的代码。从SMM返回后，处理器将恢复到SMI发生之前的状态。
- **虚拟8086模式**：在保护模式下，处理器支持一种称为虚拟8086模式的准操作模式。此模式允许处理器在受保护的多任务环境中执行8086软件。

下图展示了处理器在这些操作模式之间的切换方式。

![](/static/images/2502/p022.png)

处理器在上电或复位后进入实地址模式。此后，控制寄存器CR0中的PE标志控制处理器是在实地址模式还是保护模式下运行（参见第2.5节“控制寄存器”）。有关在实地址模式和保护模式之间切换的详细信息，请参见第9.9节“模式切换”。

> todo：查下模式切换细节

EFLAGS寄存器中的VM标志决定处理器是在保护模式还是虚拟8086模式下运行。保护模式和虚拟8086模式之间的切换通常作为任务切换或从中断或异常处理程序返回的一部分进行。

当处理器在实地址模式、保护模式或虚拟8086模式下接收到SMI时，处理器会切换到SMM。执行RSM指令后，处理器始终返回到SMI发生时的模式。