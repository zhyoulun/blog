### 描述

检测丢失segment的方法从概念上讲还是比较简单的，每一次开始发送一个TCP segment的时候，就启动重传定时器，定时器的时间一开始是一个预设的值（Linux 规定为1s），随着通讯的变化以及时间的推移，这个定时器的溢出值是不断的在变化的，有相关算法计算RTO,如果在ACK收到之前，定时器到期，协议栈就会认为这个片段被丢失，重新传送数据。

### 问题

服务端依次发送1、2、3、4到客户端，其中3丢失了

这种方式会面临一个问题：客户端在等待报文3的时候，服务器如何处理报文4， 客户端这个期间内并没有发送任何报文，服务器并不知道报文3和报文4的状态，报文4可能会丢失，也可能会被客户端接收，那么如果超时了，我到底值该发送报文3 ，还是报文3和报文4 呢？

总结起来就是两种方式：

1. 定时器溢出，重传3
2. 定时器溢出，重传3、4

其中方式2的效率是比较差的，如何解决？SACK（Selective Acknowledgment）

## 参考

- [TCP-IP详解：超时重传机制](https://blog.csdn.net/wdscq1234/article/details/52476231)
