# 中文

### 什么是互联网交换点？  
互联网交换点（IXP）是一个物理位置，互联网基础设施公司（如互联网服务提供商（ISP）和内容分发网络（CDN））通过它相互连接。这些位置位于不同网络的“边缘”，使网络提供商能够在自身网络之外共享传输。通过在IXP位置内部设立节点，公司可以缩短通往其他参与网络的路径，从而减少延迟、改善往返时间，并可能降低成本。

### 互联网交换点如何运作？  
IXP的核心是一个或多个物理位置，包含网络交换机，用于在不同成员网络之间路由流量。通过多种方式，这些网络共同分担维护物理基础设施及相关服务的成本。类似于通过巴拿马运河等第三方地点运输货物时产生的费用，当流量在不同网络之间传输时，有时这些网络会收取费用。为了避免这些成本以及与通过第三方网络发送流量相关的其他缺点，成员公司通过IXP相互连接，以降低成本并减少延迟。

IXP是大型的第二层局域网（OSI网络模型），由一个或多个以太网交换机在一个或多个物理建筑内互连而成。IXP的基本概念与家庭网络并无不同，唯一的真正区别在于规模。IXP的交换流量范围可以从数百兆比特/秒到数太比特/秒。无论规模如何，其主要目标是确保许多网络的路由器能够干净高效地连接在一起。相比之下，家庭中通常只有一个路由器和多台计算机或移动设备。

在过去二十年中，网络互连经历了重大扩展，与全球互联网的巨大扩展并行。这一扩展包括开发新的数据中心设施以容纳网络设备。其中一些数据中心吸引了大量网络，这在很大程度上归功于其中运营的繁荣的互联网交换点。

### 为什么互联网交换点很重要？  
如果没有IXP，从一个网络到另一个网络的流量可能依赖中介网络将流量从源传输到目的地。这些被称为传输提供商。在某些情况下，这样做没有问题：这是大部分国际互联网流量的流动方式，因为与世界上每个ISP建立直接连接的成本过高。然而，依赖骨干ISP传输本地流量可能对性能不利，有时是因为骨干运营商会将数据发送到另一个完全不同的城市的网络。这种情况可能导致所谓的“长号效应”，在最坏的情况下，从一个城市发往同一城市另一个ISP的流量可能会长途跋涉进行交换，然后再返回。拥有IXP存在的CDN具有优化其网络内数据流动路径的优势，从而减少低效路径。

![](/static/images/2109/p104.webp)

### BGP，互联网的骨干协议  
网络之间使用BGP（边界网关协议）进行通信。该协议允许网络清晰地划分其内部需求和网络边缘配置。IXP上的所有对等互连都使用BGP。

### 提供商如何在不同网络之间共享流量？  
#### 传输  
客户与其上游提供商之间的协议。传输提供商为其客户提供与互联网其余部分的完全连接。传输是一项付费服务。BGP协议用于允许客户IP地址向传输提供商宣告，然后向全球互联网的其余部分宣告。

#### 对等互连  
网络之间在没有中介的情况下共享IP地址的安排。在互联网交换点，成员网络之间的数据传输通常不产生成本。当流量从一个网络免费传输到另一个网络时，这种关系称为无结算对等互连。

#### 对等互连与付费传输  
对于一些网络来说，传输数据并不总是免费的。例如，市场份额相对平等的大型网络更可能与其他大型网络对等互连，但可能向较小的网络收取对等互连服务费用。在单个IXP中，成员公司可能与多个不同成员有不同的安排。在这种情况下，公司可以配置其路由协议，以确保使用BGP协议优化成本或延迟。

#### 解除对等互连  
随着时间的推移，关系可能会发生变化，有时网络不再希望共享免费互连。当网络决定终止对等互连安排时，他们会经历一个称为解除对等互连的过程。解除对等互连可能由于多种原因发生，例如由于不良的流量比例导致一方受益更多，或者网络决定开始向另一方收费。这一过程可能非常情绪化，被拒绝的网络可能会在对等互连关系终止后故意中断另一方的流量。

#### IXP如何使用BGP？  
在IXP的本地网络中，不同的提供商能够使用BGP协议创建一对一的连接。该协议旨在允许不同的网络相互宣告其IP地址以及它们为下游（即其客户）提供连接的IP地址。一旦两个网络建立了BGP会话，它们各自的路由就会交换，流量可以直接在它们之间流动。

#### IXP或PNI互连  
两个网络可能认为它们的流量非常重要，以至于它们希望从IXP的共享基础设施转移到两个网络之间的专用互连。PNI（私有网络互连）只是一条暗光纤连接（通常在同一数据中心或建筑物内），直接将网络A的端口与网络B的端口连接。BGP与共享IXP对等互连设置几乎相同。

# 英文

### What is an Internet exchange point?

An Internet exchange point (IXP) is a physical location through which Internet infrastructure companies such as Internet Service Providers (ISPs) and CDNs connect with each other. These locations exist on the “edge” of different networks, and allow network providers to share transit outside their own network. By having a presence inside of an IXP location, companies are able to shorten their path to the transit coming from other participating networks, thereby reducing latency, improving round-trip time, and potentially reducing costs.

### How does an Internet exchange point work?

At its core, an IXP is essentially one or more physical locations containing network switches that route traffic between the different members networks. Via various methods, these networks share the costs of maintaining the physical infrastructure and associated services. Similar to how costs are accrued when shipping cargo through third-party locations such as via the Panama Canal, when traffic is transferred across different networks, sometimes those networks charge money for the delivery. To avoid these costs and other drawbacks associated with sending their traffic across a third-party network, member companies connect with each other via IXP to cut down on costs and reduce latency.

IXPs are large Layer 2 LANs (of the OSI network model) that are built with one or many Ethernet switches interconnected together across one or more physical buildings. An IXP is no different in basic concept to a home network, with the only real difference being scale. IXPs can range from 100s of Megabits/second to many Terabits/second of exchanged traffic. Independent of size, their primary goal is to make sure that many networks’ routers are connected together cleanly and efficiently. In comparison, at home someone would normally only have one router and many computers or mobile devices.

Over the last twenty years, there has been a major expansion in network interconnections, running parallel to the enormous expansion of the global Internet. This expansion includes new data center facilities being developed to house network equipment. Some of those data centers have attracted massive numbers of networks, in no small part due to the thriving Internet exchange points that operate within them.

### Why are Internet exchange points important?

Without IXPs, traffic going from one network to another would potentially rely on an intermediary network to carry the traffic from source to destination. These are called transit providers. In some situations there’s no problem with doing this: it’s how a large portion of international Internet traffic flows, as it’s cost prohibitive to maintain direct connections to each-and-every ISP in the world. However, relying on a backbone ISP to carry local traffic can be adverse to performance, sometimes due to the backbone carrier sending data to another network in a completely different city. This situation can lead to what’s known as tromboning, where in the worst case, traffic from one city destined to another ISP in the same city can travel vast distances to be exchanged and then return again. A CDN with IXP presence has the advantage of optimizing the path through which data flows within it’s network, cutting down on inefficient paths.

![](/static/images/2109/p104.webp)

### BGP, the Internet’s backbone protocol

Networks talk between each other using the BGP (Border Gateway Protocol). This protocol allows networks to cleanly delinerate between their internal requirements and their network-edge configurations. All peering at IXPs uses BGP.

### How do providers share traffic across different networks?

#### Transit

The agreement between a customer and it’s upstream provider. A transit provider provides its customers with full connectivity to the rest of the Internet. Transit is a paid-for service. BGP protocol is used to allow customer IP addresses to be announced towards the transit provider and then onwards towards the rest of the global Internet.



#### Peering

The arrangement behind how networks share IP addresses without an intermediary between them. At Internet exchange points, there is predominantly no cost associated with transferring data between member networks. When traffic is transferred for free from one network to the next, the relationship is called settlement-free peering.



#### Peering vs paid transit

Unfortunately for some networks, transferring data is not always without cost. For example, large networks with relatively equal market share are more likely to peer with other large networks but may charge smaller networks for the peering service. In a single IXP, a member company may have different arrangements with several different members. In instances like this, a company may configure their routing protocols to make sure that they optimize for reduced costs or reduced latency using the BGP protocol.



#### Depeering

Over time relationships can change, and sometimes networks no longer want to share free interconnection. When a network decides end their peering arrangement they go through a process called depeering. Depeering can occur for a variety of reasons such as when one party is benefiting more than the other due to bad traffic ratios, or when a network simply decides to start charging the other party money. This process can be highly emotional, and a spurned network may intentionally disrupt the traffic of the other party once the peering relationship has been terminated.




#### How do IXPs use BGP?

Across an IXP's local network, different providers are able to create one-to-one connections using the BGP protocol. This protocol was created to allow disparate networks to announce their IP addresses to each other plus the IP addresses that they have provided connectivity to downstream (i.e. their customers). Once two networks set up a BGP session, their respective routes are exchanged and traffic can flow directly between them. Cloudflare CDN

#### IXP or PNI interconnection

Two networks may consider their traffic to be important enough that they want to move from the shared infrastructure of an IXP and onto a dedicated interconnection between the two networks. A PNI (Private Network Interconnect) is simply a dark fiber connection (normally within a single datacenter, or building) that directly connects a port on network A with a port on network B. The BGP is nearly identical as a shared IXP peering setup.


## 参考

- [What is an Internet exchange point? | How do IXPs work?](https://www.cloudflare.com/zh-cn/learning/cdn/glossary/internet-exchange-point-ixp/)
- [https://www.peeringdb.com/about](https://www.peeringdb.com/about)
- [http://bgp.he.net/](http://bgp.he.net/)