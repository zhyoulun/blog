**Looking Glass（网络窥镜）** 是一种网络诊断工具，允许用户通过Web界面或命令行远程测试和监控网络连接状态，尤其在互联网服务提供商（ISP）、数据中心或交换点（IXP）中广泛使用。以下是其核心功能与使用场景：

---

### **一、核心功能**
1. **路由追踪（Traceroute）**：  
   显示数据包从源到目标经过的路由节点路径，帮助定位网络瓶颈或故障点。
   
2. **BGP路由查询**：  
   查看特定IP地址或ASN的BGP路由信息，包括宣告的前缀和邻居关系。

3. **Ping测试**：  
   测试与目标服务器的连通性和延迟。

4. **DNS查询**：  
   验证DNS解析是否正常，排查域名解析问题。

5. **Looking Glass服务器状态**：  
   提供服务器所在网络的实时状态（如带宽利用率、丢包率）。

---

### **二、使用场景**
- **网络运维**：快速诊断跨运营商或跨国链路的连通性问题。  
- **BGP调试**：验证路由宣告是否正确，排查路由泄露或劫持。  
- **服务选型**：评估不同ISP或云服务商的网络质量。  

---

### **三、常用Looking Glass实例**
| 服务提供商          | 链接                                      |
|---------------------|------------------------------------------|
| **Hurricane Electric** | [HE Looking Glass](https://lg.he.net/)   |
| **Cloudflare**       | [Cloudflare LG](https://www.cloudflare.com/network/looking-glass/) |
| **DE-CIX（IXP）**    | [DE-CIX LG](https://www.de-cix.net/en/locations/germany/frankfurt/looking-glass) |
| **Equinix**          | [Equinix LG](https://www.equinix.com/resources/looking-glass/) |

---

### **四、操作示例（以HE Looking Glass为例）**
1. **访问** [HE Looking Glass](https://lg.he.net/)。  
2. **选择服务器位置**（如美国、欧洲）。  
3. **执行命令**：  
   ```bash
   traceroute 8.8.8.8  # 追踪到Google DNS的路由路径
   show bgp route 8.8.8.8  # 查看BGP路由信息
   ```

**输出示例**：
```
Traceroute to 8.8.8.8 (8.8.8.8):
 1  10.0.0.1 (10.0.0.1)  1.2ms
 2  203.0.113.1 (ISP节点)  5.5ms
 ...
10  dns.google (8.8.8.8)  30ms ✅
```

---

### **五、自建Looking Glass服务器**
若需为自有网络搭建Looking Glass，常用工具包括：
- **开源方案**：  
  - [Looking Glass (PHP)](https://github.com/inex/lg)  
  - [BIRD-lg](https://github.com/inex/Bird-lg)（基于BIRD路由守护进程）  
- **部署步骤**：  
  1. 安装Web服务器（如Nginx/Apache）和PHP。  
  2. 配置BGP路由信息读取权限。  
  3. 设置安全策略（限制访问IP或命令权限）。

---

### **六、与Traceroute的区别**
| **工具**       | **Looking Glass**                  | **Traceroute**              |
|----------------|------------------------------------|------------------------------|
| **数据来源**   | 目标网络内部的服务器视角           | 用户本地网络视角             |
| **功能范围**   | 集成路由、BGP、DNS等多功能         | 仅路由追踪                   |
| **使用门槛**   | 需访问第三方服务器                 | 本地终端直接执行             |

---

### **总结**
Looking Glass是网络工程师的“远程诊断仪”，通过目标网络的视角快速定位问题。对于跨运营商故障、BGP路由异常等场景，它比本地工具更能反映真实路径和服务质量。