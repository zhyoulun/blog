### 基本概念

RAII：Resource Acquisition Is Initialization，资源获取即初始化

使用局部对象来管理资源的技术称为资源获取即初始化；这里的资源主要是指操作系统中有限的东西如内存、网络套接字等等，局部对象是指存储在栈的对象，它的生命周期是由操作系统来管理的，无需人工介入。

### 为什么需要RAII

资源的使用一般经历三个步骤a.获取资源 b.使用资源 c.销毁资源，但是资源的销毁往往是程序员经常忘记的一个环节，所以程序界就想如何在程序员中让资源自动销毁呢？

c++之父给出了解决问题的方案：RAII

它充分的利用了C++语言局部对象自动销毁的特性来控制资源的生命周期。

### 如何使用RAII

整个RAII过程我总结四个步骤：

1. 设计一个类封装资源
2. 在构造函数中初始化
3. 在析构函数中执行销毁操作
4. 使用时声明一个该对象的类

### 有了RAII，为什么还需要引用计数

凡事都有例外，我们总会有需要将对象在自由存储上分配的需求，在传统 C++ 里我们只好使用 new 和 delete 去 『记得』对资源进行释放。而 C++11 引入智能指针的概念，使用引用计数的想法，让程序员不再需要关心手动释放内存。

## 参考

- [c++经验之谈一：RAII原理介绍](https://zhuanlan.zhihu.com/p/34660259)
- [第 5 章 智能指针与内存管理](https://changkun.de/modern-cpp/zh-cn/05-pointers/)
